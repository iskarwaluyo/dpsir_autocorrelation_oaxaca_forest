"<b><br/> SUPERFICIE: </b>", ac_mapa$AREA,
"<b><br/> VALOR DE PRODUCCIÓN MADERABLE: </b>", ac_mapa_maderable$VPM_2016)
pop_driver_no_maderable <- paste0("<b><br/> MUNICIPIO: </b>", ac_mapa$NOMGEO,
"<b><br/> SUPERFICIE: </b>", ac_mapa$AREA,
"<b><br/> VALOR DE PRODUCCIÓN MADERABLE: </b>", ac_mapa_maderable$VPNM_2016)
pop_driver_agricola <- paste0("<b><br/> MUNICIPIO: </b>", ac_mapa$NOMGEO,
"<b><br/> SUPERFICIE: </b>", ac_mapa$AREA,
"<b><br/> VALOR DE PRODUCCIÓN DE CULTIVO PRINCIPAL: </b>", ac_mapa_agricola$VPC_2016)
pop_driver_ganadera <- paste0("<b><br/> MUNICIPIO: </b>", ac_mapa$NOMGEO,
"<b><br/> SUPERFICIE: </b>", ac_mapa$AREA,
"<b><br/> VALOR DE PRODUCCIÓN DE GANADERA: </b>", ac_mapa_ganadera$VPT_2016,
"<b><br/> VOLUMEN DE PRODUCCIÓN GANADERA: </b>", ac_mapa_ganadera$PT_2016)
pop_driver_poblacion <- paste0("<b><br/> MUNICIPIO: </b>", ac_mapa$NOMGEO,
"<b><br/> SUPERFICIE: </b>", ac_mapa$AREA,
"<b><br/> POBLACIÓN: </b>", ac_mapa_pob$POB_2015)
# POP-UPS PRESSURE
pop_pressure_agricola <- paste0("<b><br/> MUNICIPIO: </b>", ac_mapa$NOMGEO,
"<b><br/> SUPERFICIE: </b>", ac_mapa$AREA,
"<b><br/> SUPERFICIE SEMBRADA: </b>", ac_mapa_agricola$SSC_2016)
# POP-UPS STATE
pop_state_agricola <- paste0("<b><br/> MUNICIPIO: </b>", ac_mapa$NOMGEO,
"<b><br/> SUPERFICIE: </b>", ac_mapa$AREA,
"<b><br/> SUPERFICIE SEMBRADA: </b>", ac_mapa_agricola$SSC_2016)
# POP-UPS IMPACT
pop_impact_maderable <- paste0("<b><br/> MUNICIPIO: </b>", ac_mapa$NOMGEO,
"<b><br/> SUPERFICIE: </b>", ac_mapa$AREA,
"<b><br/> VALOR DE PRODUCCIÓN MADERABLE: </b>", ac_mapa_maderable$VPM_2016)
pop_impact_no_maderable <- paste0("<b><br/> MUNICIPIO: </b>", ac_mapa$NOMGEO,
"<b><br/> SUPERFICIE: </b>", ac_mapa$AREA,
"<b><br/> VALOR DE PRODUCCIÓN NO-MADERABLE: </b>", ac_mapa_maderable$VPNM_2016)
pop_impact_agricola <- paste0("<b><br/> MUNICIPIO: </b>", ac_mapa$NOMGEO,
"<b><br/> SUPERFICIE: </b>", ac_mapa$AREA,
"<b><br/> VALOR DE PRODUCCIÓN AGRÍCOLA: </b>", ac_mapa_agricola$VPC_2016)
pop_impact_ganadera <- paste0("<b><br/> MUNICIPIO: </b>", ac_mapa$NOMGEO,
"<b><br/> SUPERFICIE: </b>", ac_mapa$AREA,
"<b><br/> VALOR DE PRODUCCIÓN GANADERA: </b>", ac_mapa_ganadera$VPT_2016)
# POP-UPS RESPONSE
pop_response <- paste0("<b><br/> MUNICIPIO: </b>", ac_mapa$NOMGEO,
"<b><br/> SUPERFICIE: </b>", ac_mapa$AREA,
"<b><br/> SUPERFICE ELEGIBLE PARA PSA: </b>", ac_mapa_psa$sum)
# CARGAR LIBRERIAS UTILIZADAS DE R
library(data.table)
library(curl)
library(devtools)
library(rio)
library(shiny)
library(shinythemes)
library(DT)
library(leaflet)
library(rgdal)
library(sf)
library(plyr)
library(DBI)
library(dplyr)
library(sf)
library(corrplot)
library(car)
library(ggplot2)
library(curl)
library(geojsonio)
library(reshape2)
library(ggcorrplot)
library(colorspace)
library(revealjs)
library(ggpmisc)
library(magrittr)
library(OneR)
library(jcolors)
library(rgeoda)
#ac_mapa_maderable$VPM_2016 <- as.numeric(ac_mapa_maderable$VPM_2016)
ac_mapa_maderable$VPM_2016 <- as.numeric(ac_mapa_maderable$VPM_2016)
ac_mapa_maderable@data[is.na(ac_mapa_maderable@data)] <- 0
ac_mapa_agricola@data[is.na(ac_mapa_agricola@data)] <- 0
ac_mapa_ganadera@data[is.na(ac_mapa_ganadera@data)] <- 0
ac_mapa_pob@data[is.na(ac_mapa_pob@data)] <- 0
ac_mapa_psa$sum[is.na(ac_mapa_psa$sum)] <- 0
ac_mapa_maderable$APM_2016 <- as.numeric(ac_mapa_maderable$APM_2016)
ac_mapa_maderable$APNM_2016 <- as.numeric(ac_mapa_maderable$APNM_2016)
# PRESSURE - CALUCLAR % DE COBERTURA CON ACTIVIDAD AGRICOLA
ac_mapa_agricola$SSCPCT_2016 <- 100*(ac_mapa_agricola$SSC_2016/(as.numeric(ac_mapa_agricola$AREA)))
# DRIVERS
# VALUE OF FORESTRY, AGRICULTURE AND LIVESTOCK PRODUCTION
bins_vpm <- c(0, 500, 1000, 2000, 4000, 8000, 16000, 32000, 64000, Inf)
pal_vpm <- colorBin(palette = colorRamp(c("#f7ffec", "#d2fa97", "#f3facb", "#fff488", "#ff383f"), interpolate="spline"), domaster = ac_mapa_maderable$VPM_2016, bins = bins_vpm)
bins_vpnm <- c(0, 2, 10, 50, 250, Inf)
pal_vpnm <- colorBin(palette = colorRamp(c("#f7ffec", "#d2fa97", "#f3facb", "#fff488", "#ff383f"), interpolate="spline"), domaster = ac_mapa_maderable$VPNM_2016, bins = bins_vpnm)
bins_vpc <- c(0, 500, 1000, 2000, 4000, 8000, 16000, 32000, 64000, 128000, 256000, 512000, 1024000, Inf)
pal_vpc <- colorBin(palette = colorRamp(c("#f7ffec", "#d2fa97", "#f3facb", "#fff488", "#ff383f"), interpolate="spline"), domaster = ac_mapa_agricola$VPC_2016, bins = bins_vpc)
bins_vpt <- c(0, 100, 500, 2500, 12500, 62500, 312500, Inf)
pal_vpt <- colorBin(palette = colorRamp(c("#f7ffec", "#d2fa97", "#f3facb", "#fff488", "#ff383f"), interpolate="spline"), domaster = ac_mapa_ganadera$VPT_2016, bins = bins_vpt)
bins_pob <- c(50, 250, 500, 1000, 2000, 4000, 8000, 16000, 32000, 64000, 128000, 256000, Inf)
pal_pob <- colorBin(palette = colorRamp(c("#f7ffec", "#d2fa97", "#f3facb", "#fff488", "#ff383f"), interpolate="spline"), domaster = ac_mapa_pob$POB_2015, bins = bins_pob)
# PRESSURE
# PERCENTAGE OF SURFACE AREA USED FOR AGRICULTURE AND LIVESTOCK
bins_pct <- c(0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100)
pal_pct <- colorBin(palette = "Oranges", bins = bins_pct)
# STATE
# LAND USE COVERAGE
# IMPACT
# APROVECHAMIENTO MADERABLE Y NO MADERABLE
bins_apm <- c(0, 500, 1000, 2000, 4000, 8000, 16000, 32000, 64000, 128000, Inf)
pal_apm <- colorBin(palette= "Blues", domaster = ac_mapa_maderable$APM_2016, bins = bins_apm)
bins_apnm <- c(0, 500, 1000, 2000, Inf)
pal_apnm <- colorBin(palette= "Blues", domaster = ac_mapa_maderable$APM_2016, bins = bis_apnm)
# RESPONSE
bins_psa <- c(0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100)
pal_psa <- colorBin(palette = "Greens", domaster = ac_mapa_psa$PCT_PSA, bins = bins_psa)
# AUTOCORRELACION
pal_autocorr <- colorBin( palette="magma", domaster = ac_mapa_autocorr$VPT_LISA_CL, bins = bins_autocorr)
bins_autocorr <- c(0,1,2,3,4)
azul_a <- rgb(1/255, 7/255, 255/255, 1)
azul_b <- rgb(177/255, 209/255, 230/255, 1)
blanco <- rgb(255/255, 255/255, 255/255, 1)
rojo_a <- rgb(250/255, 112/255, 105/255, 1)
rojo_b <- rgb(255/255, 0/255, 0/255, 1)
geoda_colors <- c(azul_a, azul_b, blanco, rojo_a, rojo_b)
# PALETA DE COLORES
pal2 <- colorNumeric(
palette = "Blues",
domaster = countries$gdp_md_est)
pal <- colorFactor(c("#e4e4e4", "#ff2500", "#0432ff", "#a6aaff", "#ffa8a6"), 0:4)
palb <- colorFactor( palette="Spectral", 1:7)
#pal_0b <- colorBin( palette="Set1", domaster = autocorr$LISA_CLdef, bins = bins_autocorr)
#pal_0c <- colorBin( palette="heat", domaster = autocorr$LISA_CLdeg, bins = bins_autocorr)
#pal_1 <- colorBin( palette="magma", domaster = as.numeric(as.character(ac_mapa_ma@data$X2016)), bins = bins_superficie)
#pal_2 <- colorNumeric( palette= "YlGn", domaster=ac_mapa@data$PCT_FORESTAL, na.color="transparent")
#pal_3 <- colorNumeric( palette="YlOrBr", domaster=ac_mapa@data$PCT_AGRICOLA, na.color="transparent")
#pal_4 <- colorNumeric( palette="YlOrRd", domaster=ac_mapa@data$PCT_PECUARIO, na.color="transparent")
# k-means only works with numerical variables,
# so don't give the user the option to select
# a categorical variable
#vars <- colnames(matriz_correlacion)
# POP-UPS MADERABLE
pop_driver_maderable <- paste0("<b><br/> MUNICIPIO: </b>", ac_mapa$NOMGEO,
"<b><br/> SUPERFICIE: </b>", ac_mapa$AREA,
"<b><br/> VALOR DE PRODUCCIÓN MADERABLE: </b>", ac_mapa_maderable$VPM_2016)
pop_driver_no_maderable <- paste0("<b><br/> MUNICIPIO: </b>", ac_mapa$NOMGEO,
"<b><br/> SUPERFICIE: </b>", ac_mapa$AREA,
"<b><br/> VALOR DE PRODUCCIÓN MADERABLE: </b>", ac_mapa_maderable$VPNM_2016)
pop_driver_agricola <- paste0("<b><br/> MUNICIPIO: </b>", ac_mapa$NOMGEO,
"<b><br/> SUPERFICIE: </b>", ac_mapa$AREA,
"<b><br/> VALOR DE PRODUCCIÓN DE CULTIVO PRINCIPAL: </b>", ac_mapa_agricola$VPC_2016)
pop_driver_ganadera <- paste0("<b><br/> MUNICIPIO: </b>", ac_mapa$NOMGEO,
"<b><br/> SUPERFICIE: </b>", ac_mapa$AREA,
"<b><br/> VALOR DE PRODUCCIÓN DE GANADERA: </b>", ac_mapa_ganadera$VPT_2016,
"<b><br/> VOLUMEN DE PRODUCCIÓN GANADERA: </b>", ac_mapa_ganadera$PT_2016)
pop_driver_poblacion <- paste0("<b><br/> MUNICIPIO: </b>", ac_mapa$NOMGEO,
"<b><br/> SUPERFICIE: </b>", ac_mapa$AREA,
"<b><br/> POBLACIÓN: </b>", ac_mapa_pob$POB_2015)
# POP-UPS PRESSURE
pop_pressure_agricola <- paste0("<b><br/> MUNICIPIO: </b>", ac_mapa$NOMGEO,
"<b><br/> SUPERFICIE: </b>", ac_mapa$AREA,
"<b><br/> SUPERFICIE SEMBRADA: </b>", ac_mapa_agricola$SSC_2016)
# POP-UPS STATE
pop_state_agricola <- paste0("<b><br/> MUNICIPIO: </b>", ac_mapa$NOMGEO,
"<b><br/> SUPERFICIE: </b>", ac_mapa$AREA,
"<b><br/> SUPERFICIE SEMBRADA: </b>", ac_mapa_agricola$SSC_2016)
# POP-UPS IMPACT
pop_impact_maderable <- paste0("<b><br/> MUNICIPIO: </b>", ac_mapa$NOMGEO,
"<b><br/> SUPERFICIE: </b>", ac_mapa$AREA,
"<b><br/> VALOR DE PRODUCCIÓN MADERABLE: </b>", ac_mapa_maderable$VPM_2016)
pop_impact_no_maderable <- paste0("<b><br/> MUNICIPIO: </b>", ac_mapa$NOMGEO,
"<b><br/> SUPERFICIE: </b>", ac_mapa$AREA,
"<b><br/> VALOR DE PRODUCCIÓN NO-MADERABLE: </b>", ac_mapa_maderable$VPNM_2016)
pop_impact_agricola <- paste0("<b><br/> MUNICIPIO: </b>", ac_mapa$NOMGEO,
"<b><br/> SUPERFICIE: </b>", ac_mapa$AREA,
"<b><br/> VALOR DE PRODUCCIÓN AGRÍCOLA: </b>", ac_mapa_agricola$VPC_2016)
pop_impact_ganadera <- paste0("<b><br/> MUNICIPIO: </b>", ac_mapa$NOMGEO,
"<b><br/> SUPERFICIE: </b>", ac_mapa$AREA,
"<b><br/> VALOR DE PRODUCCIÓN GANADERA: </b>", ac_mapa_ganadera$VPT_2016)
# POP-UPS RESPONSE
pop_response <- paste0("<b><br/> MUNICIPIO: </b>", ac_mapa$NOMGEO,
"<b><br/> SUPERFICIE: </b>", ac_mapa$AREA,
"<b><br/> SUPERFICE ELEGIBLE PARA PSA: </b>", ac_mapa_psa$sum)
# AUTOCORRELATION (GEODA) (SOLO JALA CON SF NO SP)
w <- queen_weights(ac_mapa_agricola)
lisa <- local_moran(w, ac_mapa_agricola['VPC_2016'])
ac_mapa_autocorr$VPM_LISA_CL
bins_vpm <- c(0, 500, 1000, 2000, 4000, 8000, 16000, 32000, 64000, Inf)
pal_vpm <- colorBin(palette = colorRamp(c("#f7ffec", "#d2fa97", "#f3facb", "#fff488", "#ff383f"), interpolate="spline"), domaster = ac_mapa_maderable$VPM_2016, bins = bins_vpm)
# DRIVERS
# VALUE OF FORESTRY, AGRICULTURE AND LIVESTOCK PRODUCTION
bins_vpm <- c(0, 500, 1000, 2000, 4000, 8000, 16000, 32000, 64000, Inf)
pal_vpm <- colorBin(palette = colorRamp(c("#f7ffec", "#d2fa97", "#f3facb", "#fff488", "#ff383f"), interpolate="spline"), domain = ac_mapa_maderable$VPM_2016, bins = bins_vpm)
bins_vpnm <- c(0, 2, 10, 50, 250, Inf)
pal_vpnm <- colorBin(palette = colorRamp(c("#f7ffec", "#d2fa97", "#f3facb", "#fff488", "#ff383f"), interpolate="spline"), domain = ac_mapa_maderable$VPNM_2016, bins = bins_vpnm)
bins_vpc <- c(0, 500, 1000, 2000, 4000, 8000, 16000, 32000, 64000, 128000, 256000, 512000, 1024000, Inf)
pal_vpc <- colorBin(palette = colorRamp(c("#f7ffec", "#d2fa97", "#f3facb", "#fff488", "#ff383f"), interpolate="spline"), domain = ac_mapa_agricola$VPC_2016, bins = bins_vpc)
bins_vpt <- c(0, 100, 500, 2500, 12500, 62500, 312500, Inf)
pal_vpt <- colorBin(palette = colorRamp(c("#f7ffec", "#d2fa97", "#f3facb", "#fff488", "#ff383f"), interpolate="spline"), domain = ac_mapa_ganadera$VPT_2016, bins = bins_vpt)
bins_pob <- c(50, 250, 500, 1000, 2000, 4000, 8000, 16000, 32000, 64000, 128000, 256000, Inf)
pal_pob <- colorBin(palette = colorRamp(c("#f7ffec", "#d2fa97", "#f3facb", "#fff488", "#ff383f"), interpolate="spline"), domain = ac_mapa_pob$POB_2015, bins = bins_pob)
# PRESSURE
# PERCENTAGE OF SURFACE AREA USED FOR AGRICULTURE AND LIVESTOCK
bins_pct <- c(0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100)
pal_pct <- colorBin(palette = "Oranges", bins = bins_pct)
# STATE
# LAND USE COVERAGE
# IMPACT
# APROVECHAMIENTO MADERABLE Y NO MADERABLE
bins_apm <- c(0, 500, 1000, 2000, 4000, 8000, 16000, 32000, 64000, 128000, Inf)
pal_apm <- colorBin(palette= "Blues", domain = ac_mapa_maderable$APM_2016, bins = bins_apm)
bins_apnm <- c(0, 500, 1000, 2000, Inf)
pal_apnm <- colorBin(palette= "Blues", domain = ac_mapa_maderable$APM_2016, bins = bis_apnm)
# RESPONSE
bins_psa <- c(0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100)
pal_psa <- colorBin(palette = "Greens", domain = ac_mapa_psa$PCT_PSA, bins = bins_psa)
# AUTOCORRELACION
pal_autocorr <- colorBin( palette="magma", domain = ac_mapa_autocorr$VPT_LISA_CL, bins = bins_autocorr)
bins_autocorr <- c(0,1,2,3,4)
azul_a <- rgb(1/255, 7/255, 255/255, 1)
azul_b <- rgb(177/255, 209/255, 230/255, 1)
blanco <- rgb(255/255, 255/255, 255/255, 1)
rojo_a <- rgb(250/255, 112/255, 105/255, 1)
rojo_b <- rgb(255/255, 0/255, 0/255, 1)
geoda_colors <- c(azul_a, azul_b, blanco, rojo_a, rojo_b)
# PALETA DE COLORES
pal2 <- colorNumeric(
palette = "Blues",
domain = countries$gdp_md_est)
pal <- colorFactor(c("#e4e4e4", "#ff2500", "#0432ff", "#a6aaff", "#ffa8a6"), 0:4)
palb <- colorFactor( palette="Spectral", 1:7)
#pal_0b <- colorBin( palette="Set1", domain = autocorr$LISA_CLdef, bins = bins_autocorr)
#pal_0c <- colorBin( palette="heat", domain = autocorr$LISA_CLdeg, bins = bins_autocorr)
#pal_1 <- colorBin( palette="magma", domain = as.numeric(as.character(ac_mapa_ma@data$X2016)), bins = bins_superficie)
#pal_2 <- colorNumeric( palette= "YlGn", domain=ac_mapa@data$PCT_FORESTAL, na.color="transparent")
#pal_3 <- colorNumeric( palette="YlOrBr", domain=ac_mapa@data$PCT_AGRICOLA, na.color="transparent")
#pal_4 <- colorNumeric( palette="YlOrRd", domain=ac_mapa@data$PCT_PECUARIO, na.color="transparent")
# k-means only works with numerical variables,
# so don't give the user the option to select
# a categorical variable
#vars <- colnames(matriz_correlacion)
m0 <- leaflet(ac_mapa) %>%
addMapPane("A", zIndex = 490) %>% #
addMapPane("B", zIndex = 480) %>% #
addMapPane("C", zIndex = 470) %>% #
addMapPane("D", zIndex = 460) %>% #
addMapPane("E", zIndex = 450) %>% #
addTiles() %>%
addTiles(group = "Open Street Map") %>%
addProviderTiles(providers$Stamen.Toner, group = "Toner") %>%
addProviderTiles(providers$Stamen.TonerLite, group = "Toner Lite") %>%
addPolygons(stroke = FALSE, smoothFactor = 0.3, fillOpacity = .2,
fillColor = ~pal(as.numeric(CVE_MUN)),
label = ~paste0(NOMGEO, ": ", formatC(NOMGEO, big.mark = ",")))
m0 <- m0 %>%  addPolygons(data = ac_mapa_maderable, stroke = TRUE, smoothFactor = 0.3,
options = pathOptions(pane = "A"),
fillOpacity = 1,
fillColor = ~pal_vpm(VPM_2016),
opacity = .3,
weight = 1,
color = "#4D4D4D",
dashArray = "2",
highlight = highlightOptions(
weight = 1,
color = "#4D4D4D",
fillOpacity = 0.1,
dashArray = "2",
bringToFront = TRUE),
group = "REGIONES",
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "3px 8px"),
textsize = "15px",
direction = "auto"),
popup = ~pop_driver_maderable)
m0 <- m0 %>%  addPolygons(data = ac_mapa_maderable, stroke = TRUE, smoothFactor = 0.3,
options = pathOptions(pane = "A"),
fillOpacity = 1,
fillColor = ~pal_vpm(VPM_2016),
opacity = .3,
weight = 1,
color = "#4D4D4D",
dashArray = "2",
highlight = highlightOptions(
weight = 1,
color = "#4D4D4D",
fillOpacity = 0.1,
dashArray = "2",
bringToFront = TRUE),
group = "MADERABLE",
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "3px 8px"),
textsize = "15px",
direction = "auto"),
popup = ~pop_driver_maderable)
m0 <- m0 %>%  addPolygons(data = ac_mapa_maderable, stroke = TRUE, smoothFactor = 0.3,
options = pathOptions(pane = "B"),
fillOpacity = 1,
fillColor = ~pal_vpnm(VPNM_2016),
opacity = .3,
weight = 1,
color = "#4D4D4D",
dashArray = "2",
highlight = highlightOptions(
weight = 1,
color = "#4D4D4D",
fillOpacity = 0.1,
dashArray = "2",
bringToFront = TRUE),
group = "NO MADERABLE",
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "3px 8px"),
textsize = "15px",
direction = "auto"),
popup = ~pop_driver_no_maderable)
m0 <- m0 %>%  addPolygons(data = ac_mapa_agricola, stroke = TRUE, smoothFactor = 0.3,
options = pathOptions(pane = "C"),
fillOpacity = 1,
fillColor = ~pal_vpc(VPC_2016),
opacity = .3,
weight = 1,
color = "#4D4D4D",
dashArray = "2",
highlight = highlightOptions(
weight = 1,
color = "#4D4D4D",
fillOpacity = 0.1,
dashArray = "2",
bringToFront = TRUE),
group = "AGRÍCOLA",
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "3px 8px"),
textsize = "15px",
direction = "auto"),
popup = ~pop_driver_agricola)
m0 <- m0 %>%  addPolygons(data = ac_mapa_ganadera, stroke = TRUE, smoothFactor = 0.3,
options = pathOptions(pane = "D"),
fillOpacity = 1,
fillColor = ~pal_vpt(VPT_2016),
opacity = .3,
weight = 1,
color = "#4D4D4D",
dashArray = "2",
highlight = highlightOptions(
weight = 1,
color = "#4D4D4D",
fillOpacity = 0.1,
dashArray = "2",
bringToFront = TRUE),
group = "GANADERA",
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "3px 8px"),
textsize = "15px",
direction = "auto"),
popup = ~pop_driver_ganadera)
m0 <- m0 %>%  addPolygons(data = ac_mapa_pob, stroke = TRUE, smoothFactor = 0.3,
options = pathOptions(pane = "E"),
fillOpacity = 1,
fillColor = ~pal_pob(POB_2015),
opacity = .3,
weight = 1,
color = "#4D4D4D",
dashArray = "2",
highlight = highlightOptions(
weight = 1,
color = "#4D4D4D",
fillOpacity = 0.1,
dashArray = "2",
bringToFront = TRUE),
group = "POBLACIÓN",
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "3px 8px"),
textsize = "15px",
direction = "auto"),
popup = ~pop_driver_poblacion)
# CONTROL DE CAPAS
m0 <- m0 %>% addLayersControl(
baseGroups = c("Open Street Map", "Toner", "Toner Lite"),
overlayGroups = c("MADERABLE", "NO MADERABLE", "AGRÍCOLA", "GANADERA", "POBLACIÓN", "REGIONES"),
options = layersControlOptions(collapsed = FALSE)
)
m0
m0 <- leaflet(ac_mapa) %>%
addMapPane("A", zIndex = 490) %>% #
addMapPane("B", zIndex = 480) %>% #
addMapPane("C", zIndex = 470) %>% #
addMapPane("D", zIndex = 460) %>% #
addMapPane("E", zIndex = 450) %>% #
addTiles() %>%
addTiles(group = "Open Street Map") %>%
addProviderTiles(providers$Stamen.Toner, group = "Toner") %>%
addProviderTiles(providers$Stamen.TonerLite, group = "Toner Lite") %>%
addPolygons(stroke = FALSE, smoothFactor = 0.3, fillOpacity = .2,
fillColor = ~pal(as.numeric(CVE_MUN)),
label = ~paste0(NOMGEO, ": ", formatC(NOMGEO, big.mark = ",")))
m0 <- m0 %>%  addPolygons(data = ac_mapa_regiones, stroke = TRUE, smoothFactor = 0.3,
options = pathOptions(pane = "A"),
fillOpacity = 1,
fillColor = FALSE,
opacity = .95,
weight = 1,
color = "#4D4D4D",
dashArray = "2",
highlight = highlightOptions(
weight = 1,
color = "#4D4D4D",
fillOpacity = 0.1,
dashArray = "2",
bringToFront = TRUE),
group = "REGIONES",
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "3px 8px"),
textsize = "15px",
direction = "auto"),
popup = ~pop_driver_maderable)
m0 <- m0 %>%  addPolygons(data = ac_mapa_maderable, stroke = TRUE, smoothFactor = 0.3,
options = pathOptions(pane = "A"),
fillOpacity = 1,
fillColor = ~pal_vpm(VPM_2016),
opacity = .3,
weight = 1,
color = "#4D4D4D",
dashArray = "2",
highlight = highlightOptions(
weight = 1,
color = "#4D4D4D",
fillOpacity = 0.1,
dashArray = "2",
bringToFront = TRUE),
group = "MADERABLE",
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "3px 8px"),
textsize = "15px",
direction = "auto"),
popup = ~pop_driver_maderable)
m0 <- m0 %>%  addPolygons(data = ac_mapa_maderable, stroke = TRUE, smoothFactor = 0.3,
options = pathOptions(pane = "B"),
fillOpacity = 1,
fillColor = ~pal_vpnm(VPNM_2016),
opacity = .3,
weight = 1,
color = "#4D4D4D",
dashArray = "2",
highlight = highlightOptions(
weight = 1,
color = "#4D4D4D",
fillOpacity = 0.1,
dashArray = "2",
bringToFront = TRUE),
group = "NO MADERABLE",
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "3px 8px"),
textsize = "15px",
direction = "auto"),
popup = ~pop_driver_no_maderable)
m0 <- m0 %>%  addPolygons(data = ac_mapa_agricola, stroke = TRUE, smoothFactor = 0.3,
options = pathOptions(pane = "C"),
fillOpacity = 1,
fillColor = ~pal_vpc(VPC_2016),
opacity = .3,
weight = 1,
color = "#4D4D4D",
dashArray = "2",
highlight = highlightOptions(
weight = 1,
color = "#4D4D4D",
fillOpacity = 0.1,
dashArray = "2",
bringToFront = TRUE),
group = "AGRÍCOLA",
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "3px 8px"),
textsize = "15px",
direction = "auto"),
popup = ~pop_driver_agricola)
m0 <- m0 %>%  addPolygons(data = ac_mapa_ganadera, stroke = TRUE, smoothFactor = 0.3,
options = pathOptions(pane = "D"),
fillOpacity = 1,
fillColor = ~pal_vpt(VPT_2016),
opacity = .3,
weight = 1,
color = "#4D4D4D",
dashArray = "2",
highlight = highlightOptions(
weight = 1,
color = "#4D4D4D",
fillOpacity = 0.1,
dashArray = "2",
bringToFront = TRUE),
group = "GANADERA",
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "3px 8px"),
textsize = "15px",
direction = "auto"),
popup = ~pop_driver_ganadera)
m0 <- m0 %>%  addPolygons(data = ac_mapa_pob, stroke = TRUE, smoothFactor = 0.3,
options = pathOptions(pane = "E"),
fillOpacity = 1,
fillColor = ~pal_pob(POB_2015),
opacity = .3,
weight = 1,
color = "#4D4D4D",
dashArray = "2",
highlight = highlightOptions(
weight = 1,
color = "#4D4D4D",
fillOpacity = 0.1,
dashArray = "2",
bringToFront = TRUE),
group = "POBLACIÓN",
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "3px 8px"),
textsize = "15px",
direction = "auto"),
popup = ~pop_driver_poblacion)
# CONTROL DE CAPAS
m0 <- m0 %>% addLayersControl(
baseGroups = c("Open Street Map", "Toner", "Toner Lite"),
overlayGroups = c("MADERABLE", "NO MADERABLE", "AGRÍCOLA", "GANADERA", "POBLACIÓN", "REGIONES"),
options = layersControlOptions(collapsed = FALSE)
)
m0
